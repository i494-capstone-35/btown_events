(function(d){function b(k){var j=d('meta[name="csrf-token"]').attr("content");if(j){k.setRequestHeader("X-CSRF-Token",j)}}if("ajaxPrefilter" in d){d.ajaxPrefilter(function(j,l,k){b(k)})}else{d(document).ajaxSend(function(j,k){b(k)})}function c(m,j,l){var k=new d.Event(j);m.trigger(k,l);return k.result!==false}function i(m){var o,k,n,j=m.attr("data-type")||(d.ajaxSettings&&d.ajaxSettings.dataType);if(m.is("form")){o=m.attr("method");k=m.attr("action");n=m.serializeArray();var l=m.data("ujs:submit-button");if(l){n.push(l);m.data("ujs:submit-button",null)}}else{o=m.attr("data-method");k=m.attr("href");n=null}d.ajax({url:k,type:o||"GET",data:n,dataType:j,beforeSend:function(q,p){if(p.dataType===undefined){q.setRequestHeader("accept","*/*;q=0.5, "+p.accepts.script)}return c(m,"ajax:beforeSend",[q,p])},success:function(q,p,r){m.trigger("ajax:success",[q,p,r])},complete:function(q,p){m.trigger("ajax:complete",[q,p])},error:function(r,p,q){m.trigger("ajax:error",[r,p,q])}})}function f(n){var k=n.attr("href"),p=n.attr("data-method"),l=d("meta[name=csrf-token]").attr("content"),o=d("meta[name=csrf-param]").attr("content"),m=d('<form method="post" action="'+k+'"></form>'),j='<input name="_method" value="'+p+'" type="hidden" />';if(o!==undefined&&l!==undefined){j+='<input name="'+o+'" value="'+l+'" type="hidden" />'}m.hide().append(j).appendTo("body");m.submit()}function g(j){j.find("input[data-disable-with]").each(function(){var k=d(this);k.data("ujs:enable-with",k.val()).val(k.attr("data-disable-with")).attr("disabled","disabled")})}function a(j){j.find("input[data-disable-with]").each(function(){var k=d(this);k.val(k.data("ujs:enable-with")).removeAttr("disabled")})}function h(j){var k=j.attr("data-confirm");return !k||(c(j,"confirm")&&confirm(k))}function e(k){var j=false;k.find("input[name][required]").each(function(){if(!d(this).val()){j=true}});return j}d("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(k){var j=d(this);if(!h(j)){return false}if(j.attr("data-remote")!=undefined){i(j);return false}else{if(j.attr("data-method")){f(j);return false}}});d("form").live("submit.rails",function(l){var j=d(this),k=j.attr("data-remote")!=undefined;if(!h(j)){return false}if(e(j)){return !k}if(k){i(j);return false}else{setTimeout(function(){g(j)},13)}});d("form input[type=submit], form button[type=submit], form button:not([type])").live("click.rails",function(){var k=d(this);if(!h(k)){return false}var j=k.attr("name"),l=j?{name:j,value:k.val()}:null;k.closest("form").data("ujs:submit-button",l)});d("form").live("ajax:beforeSend.rails",function(j){if(this==j.target){g(d(this))}});d("form").live("ajax:complete.rails",function(j){if(this==j.target){a(d(this))}})})(jQuery);(function(){$(document).ready(function(){var f,c,b,e,a,d;d=location.pathname.split("/");e=function(g){return $(g).each(function(){return $("<img/>")[0].src=this})};$(window).load(function(){if((d[1]==="places"||d[1]==="categories")&&d.length===2){return $.getJSON(d[1]+"_images",function(g){switch(d[1]){case"places":$(g).each(function(h){return g[h]="images/logos/"+g[h]+".png"});break;case"categories":$(g).each(function(h){return g[h]="images/categories/"+g[h]+".png"})}return e(g)})}});b=0;c=function(){var g;g=$("#sitemap li").filter(function(){return $(this).text().toLowerCase().indexOf(d)!==-1});$(g).find("a").css({color:"white"});return $(g).css({color:"black",background:"#CC0000",padding:"2px 10px","-webkit-border-radius":"8px","-moz-border-radius":"8px","border-radius":"8px"})};if(d!==""){c(d)}$("#previous a").click(function(){return a("right","left",-1)});$("#next a").click(function(){return a("left","right",1)});a=function(h,j,g){var i,k;if($("p#category").length===1){i=$("p#category")[0].innerHTML}b+=g;if($("p#category").length===1){k="/cat_increment"}else{k="increment"}$.ajax({url:k,data:{weeks:b,category:i},success:function(m){var n,l;n=$(m)[0];l=$(m)[2];$("p#month").fadeOut("slow",function(){$("p#month").html(n).addClass("n_month");return $("p#month").fadeIn("slow")});return $("table").hide("slide",{direction:h},480,function(){$(this).replaceWith(l);return $("table").show("slide",{direction:j},300,function(){return $("#rando a").animate({opacity:0},"fast")})})}});return false};$("li a#sort_date").click(function(){return f("start_time")});$("li a#sort_name").click(function(){return f("name")});f=function(g){var h;d=location.pathname;h=d.split("/")[2];$.ajax({url:"/sort",data:{sortMethod:g,category:h},success:function(i){return $("ul#categories").fadeOut("slow",function(){$(this).html(i);return $(this).fadeIn("slow")})}});return false};return $("#rando a").click(function(){var h,g;h=this.getAttribute("data-message");g=Math.floor(Math.random()*h+1);return window.location="/events/"+g})})}).call(this);